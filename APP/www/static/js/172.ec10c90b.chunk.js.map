{"version":3,"file":"static/js/172.ec10c90b.chunk.js","mappings":"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","sources":["Component/Reserves.js","Contents/ImgExpo.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { Component } from 'react';\r\nimport { Container, Row, Col, Modal, ModalHeader, ModalBody, ModalFooter, Form } from 'reactstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { Button } from 'react-bootstrap';\r\nimport ImgExpo from '../Contents/ImgExpo';\r\nimport \"@mobiscroll/react/dist/css/mobiscroll.min.css\";\r\nimport { Datepicker, localeCa } from \"@mobiscroll/react\";;\r\n\r\nclass Reserves extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            dates: [],\r\n            sesions: [],\r\n            dia: \"0\",\r\n            modal: false,\r\n            expo: \"\",\r\n            sessio: \"\",\r\n            modal2: false,\r\n            reservat: 1\r\n        }\r\n\r\n        this.toggleModal2 = this.toggleModal2.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.toggleModal = this.toggleModal.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleSessio = this.handleSessio.bind(this);\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        let idExpo = this.props.match.params.idExpo;\r\n        axios.get(\"https://www.api.artgalleryxisca.me/dies/\" + idExpo)\r\n            .then(res => {\r\n                const dates = res.data;\r\n                this.setState({ dates })\r\n            })\r\n        axios.get(\"https://www.api.artgalleryxisca.me/exposicio/\" + idExpo)\r\n            .then(res => {\r\n                const expo = res.data;\r\n                this.setState({ expo })\r\n            })\r\n    }\r\n\r\n    handleChange(d) {\r\n        this.setState({ dia: d.value })\r\n        let idExpo = this.props.match.params.idExpo;\r\n        let dia = d.value;\r\n        axios.post(\"https://www.api.artgalleryxisca.me/sessions/\" + idExpo, { dia })\r\n            .then(res => {\r\n                const sesions = res.data;\r\n                this.setState({ sesions })\r\n            })\r\n    }\r\n\r\n    toggleModal() {\r\n        this.setState({\r\n            modal: !this.state.modal\r\n        })\r\n    }\r\n\r\n    toggleModal2() {\r\n        this.setState({\r\n            modal2: !this.state.modal2\r\n        });\r\n    }\r\n\r\n    handleSessio(sessio) {\r\n        this.setState({ sessio: sessio });\r\n        this.toggleModal();\r\n    }\r\n\r\n    handleSubmit() {\r\n        let id_sessio = this.state.sessio.id_sessio;\r\n        let id_usuari = 13;\r\n        axios.post(\"https://www.api.artgalleryxisca.me/reserva\", null, { params: {id_sessio, id_usuari} })\r\n            .then(res => {\r\n                this.setState({ reservat:res.data})\r\n            });\r\n        this.toggleModal();\r\n        this.toggleModal2();\r\n\r\n    }\r\n\r\n    render() {\r\n        let html;\r\n        if (this.state.sesions.length === 0) {\r\n            html = <p className=\"mt-2 text-white\">No hi ha cap sessió assignada per aquest dia.</p>\r\n        }\r\n        let conf;\r\n        if (this.state.reservat === 1) {\r\n            conf = <ModalBody>S'ha reservat correctament</ModalBody>\r\n        } if (this.state.reservat === 0) {\r\n            conf = <ModalBody>La sessió seleccionada està plena. Perfavor seleccioni una altra sessió.</ModalBody>\r\n        }\r\n        return (\r\n            <Container>\r\n                <h3 className=\"mt-3\">Reserva la teva entrada</h3>\r\n                <Row>\r\n                    <Col lg=\"2\">\r\n                        <div>\r\n                            <ImgExpo id={this.props.match.params.idExpo}/>\r\n                        </div>\r\n                    </Col>\r\n                    <Col lg=\"9\" className=\"mt-5\">\r\n                        <h5>{this.state.expo.nom}</h5>\r\n                        <p>{this.state.expo.descripcio}</p>\r\n                    </Col>\r\n                </Row>\r\n                <Row className=\"mb-5\">\r\n                    <Col lg=\"4\" sm=\"12\" className=\"mt-3\">\r\n                        <span>Tria el dia en el que vols reservar:</span>\r\n                        <Datepicker controls={['calendar']} value={this.state.dia} dateFormat=\"DD-MM-YYYY\" firstDay={1}\r\n                            returnFormat=\"iso8601\" min={this.state.dates.data_ini}\r\n                            max={this.state.dates.data_fi} locale={localeCa} onChange={this.handleChange}\r\n                        />\r\n                    </Col>\r\n                    <Col lg=\"8\" sm=\"12\" className=\"mt-3\">\r\n                        <span>Tria la sessió:</span>\r\n                        <Container style={{ backgroundColor: '#1a1a1a', borderRadius: '10px' }} className=\"bg-dark shadow-lg border border-dark d-flex flex-wrap justify-content-start m-3 p-3\">\r\n                            <Row>\r\n                                {html}\r\n                                {this.state.sesions.map(sessio => (\r\n                                    <Col lg=\"3\" xs=\"3\" className=\"d-flex justify-content-center\" key={sessio.id_sessio}>\r\n                                        <Button className=\"w-100 my-2 d-flex flex-wrap justify-content-center\" value={sessio.id_sessio} variant=\"outline-light\" onClick={() => this.handleSessio(sessio)}>\r\n                                            <p className=\"pe-0 fw-bold\">{sessio.hora_ini.slice(0, -3)} - {sessio.hora_fi.slice(0, -3)}</p>\r\n                                            <span style={{ fontSize: \"12px\", width: \"100%\" }}>{sessio.nom}</span>\r\n                                        </Button>\r\n                                    </Col>\r\n                                ))}\r\n                            </Row>\r\n                        </Container>\r\n                    </Col>\r\n                </Row>\r\n                <Modal isOpen={this.state.modal} toggle={this.toggleModal}>\r\n                    <ModalHeader toggle={this.toggleModal}>Confirmació de la reserva: </ModalHeader>\r\n                    <Form onSubmit={this.handleSubmit}>\r\n                        <ModalBody>\r\n                            <h6>Informació de la reserva:</h6>\r\n                            <p>Nom de la exposició reservada: <span className=\"fw-bold\">{this.state.expo.nom}</span> </p>\r\n                            <p>Podrà entrar al recinte a la sessió <span className=\"fw-bold\">{this.state.sessio.nom}</span> el dia {this.state.dia}: </p>\r\n                            <span className=\"fw-bold\">{this.state.sessio.hora_ini} - {this.state.sessio.hora_fi}</span>\r\n                        </ModalBody>\r\n                        <ModalFooter>\r\n                            <Button variant=\"dark\" onClick={this.handleSubmit}>Reserva</Button>\r\n                            <Button variant=\"secondary\" onClick={this.toggleModal}>Cancela</Button>\r\n                        </ModalFooter>\r\n                    </Form>\r\n                </Modal>\r\n                <Modal isOpen={this.state.modal2}>\r\n                    <ModalHeader>Informació de la reserva:</ModalHeader>\r\n                    {conf}\r\n                    <ModalFooter>\r\n                        <Button variant=\"dark\" onClick={this.handleSubmit}><Link className=\"text-decoration-none text-white\" to={\"/\"}>Torna a l'inici</Link></Button>\r\n                        <Button variant=\"secondary\" onClick={this.toggleModal2}>Cancela</Button>\r\n                    </ModalFooter>\r\n                </Modal>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\nexport default Reserves;","import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nconst API = 'https://www.api.artgalleryxisca.me';\r\nconst FOTO = 'https://www.api.artgalleryxisca.me/fotos';\r\n\r\nclass ImgExpo extends Component{\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            obra : []\r\n        }\r\n      }\r\n      componentDidMount() {\r\n        axios.get(API+'/exposicions/'+this.props.id+'/primeraObra')\r\n          .then(res => {\r\n            const obra = res.data;\r\n            this.setState({ obra });\r\n        })\r\n    }\r\n\r\n      render(){\r\n        return(\r\n            <img className=\"img-fluid rounded-start \" src={FOTO+'/'+this.state.obra.id_obres} style={{ height: 300 , objectFit: 'cover'}} alt={this.state.obra.nom}></img>\r\n\r\n        );\r\n      }\r\n}\r\nexport default ImgExpo;"],"names":["Reserves","props","state","dates","sesions","dia","modal","expo","sessio","modal2","reservat","toggleModal2","bind","handleChange","toggleModal","handleSubmit","handleSessio","idExpo","this","match","params","axios","then","res","data","setState","d","value","id_sessio","id_usuari","html","conf","length","className","lg","id","nom","descripcio","sm","Datepicker","controls","dateFormat","firstDay","returnFormat","min","data_ini","max","data_fi","locale","localeCa","onChange","style","backgroundColor","borderRadius","map","xs","variant","onClick","hora_ini","slice","hora_fi","fontSize","width","isOpen","toggle","onSubmit","to","Component","ImgExpo","obra","API","src","FOTO","id_obres","height","objectFit","alt"],"sourceRoot":""}